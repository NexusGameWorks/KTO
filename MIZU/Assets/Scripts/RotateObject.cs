using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class RotateObject : MonoBehaviour
{
    [Header("1?????????")]
    [SerializeField] private float rotationSpeed = 90f;
    [Header("??????????????????????")]
    [SerializeField] private bool autoRotating = false;

    //  ???????? 1????-1????
    private int rotateDirection = 1;

    private bool isRotating = false;  //  ??????

    //  ?????????????????????????
    public event Action<RotateObject, bool> RotatingChange;

    //  ??????????????????
    public int RotateDirection => rotateDirection;

    //  ???????????????????????????
    public bool IsRotating => isRotating;

    void Start()
    {
        if (autoRotating)
        {
            StartRotation();
        }
    }

    //  ???????????
    public void StartRotation()
    {
        if (isRotating) return;

        isRotating = true;
        RotatingChange?.Invoke(this, isRotating);
    }


    void Update()
    {
        if (isRotating)
        {
            Vector3 rotateVec = rotateDirection * rotationSpeed * Time.deltaTime * Vector3.up;
            transform.Rotate(rotateVec);
        }
    }

    //  ?????????
    public void SetRotationDirection(int direction)
    {
        if (direction != 1 && direction != -1)
        {
            Debug.LogError("?????(????)?-1(??????????");
            return;
        }

        if (rotateDirection != direction)
        {
            rotateDirection = direction;
            RotatingChange?.Invoke(this, isRotating);
        }
    }

}